(this["webpackJsonpcoronavirus-tracker"]=this["webpackJsonpcoronavirus-tracker"]||[]).push([[0],{113:function(e,t,a){e.exports=a(288)},118:function(e,t,a){},119:function(e,t,a){},120:function(e,t,a){},288:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),r=a(18),o=a.n(r),s=(a(118),a(8)),c=a(9),l=a(21),d=a(22),u=(a(119),a(120),a(293)),h=a(112),m=a(19),v=a.n(m),p=["states","positive","negative","pending","hospitalizedCurrently","hospitalizedCumulative","inIcuCurrently","inIcuCumulative","onVentilatorCurrently","onVentilatorCumulative","recovered","death","hospitalized","total","totalTestResults","posNeg","deathIncrease","hospitalizedIncrease","negativeIncrease","positiveIncrease","totalTestResultsIncrease","prevActiveInfected","newPositive","totalRecovered","activeInfected","infectionRate"],f=(p.map((function(e){return{value:e,label:v.a.startCase(e)}})),{}),D=(p.forEach((function(e){f[e]=v.a.startCase(e)})),p.map((function(e){return v.a.startCase(e)})),function(){function e(t){Object(s.a)(this,e),this.index=t.index,this.day=t.day,this.prevDay=t.prevDay,this.formatNumbers(),this.row=this.row()}return Object(c.a)(e,[{key:"newPositive",value:function(){return this.prevDay?this.day.positive-this.prevDay.row.positive:this.day.positive}},{key:"totalRecovered",value:function(){return this.prevDay?this.prevDay.row.totalRecovered+this.day.recovered:0}},{key:"prevActiveInfected",value:function(){return this.prevDay?this.prevDay.row.activeInfected:0}},{key:"activeInfected",value:function(){return this.day.positive-(this.totalRecovered()+this.day.death)}},{key:"infectionRate",value:function(){return this.prevDay?Math.round(100*(1+this.newPositive()/this.prevDay.row.activeInfected))/100:null}},{key:"date",value:function(){var e=this.day.date.toString(),t=new Date(e.substring(0,4)+"-"+e.substring(4,6)+"-"+e.substring(6,8));return t.toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}},{key:"formatNumbers",value:function(){var e=this;this.day.formattedNumbers={},p.forEach((function(t){e.day.formattedNumbers[t]=e.day[t]?e.day[t].toLocaleString(navigator.language,{minimumFractionDigits:0}):""}))}},{key:"row",value:function(){return Object(h.a)({},this.day,{index:this.index,formatted:this.formattedNumbers,prevActiveInfected:this.prevActiveInfected(),newPositive:this.newPositive(),totalRecovered:this.totalRecovered(),activeInfected:this.activeInfected(),infectionRate:this.infectionRate(),date:this.date()})}}]),e}()),g=a(105),F=a.n(g),E=a(23),y=a.n(E),C=function(){function e(t){Object(s.a)(this,e),t.callback&&(this.callback=t.callback),this.setEarliestDate(),this.loadCachedDays(),this.valid=!1,this.valid||this.buildCache()}return Object(c.a)(e,[{key:"setEarliestDate",value:function(){this.earliestCacheDate=y()().subtract(3,"hours").toDate()}},{key:"loadCachedDays",value:function(){var e=localStorage.getItem("coronadata");if(!e)return this.valid=!1,!1;this.coronaData=JSON.parse(e),this.coronaData.cacheTimestamp<this.earliestCacheDate?this.valid=!1:(this.callback(this.coronaData),this.valid=!0)}},{key:"buildCache",value:function(){var e=this;F.a.get("https://covidtracking.com/api/us/daily").then((function(t){e.coronaData={cacheTimestamp:Date.now(),data:t.data},localStorage.setItem("coronadata",JSON.stringify(e.coronaData)),e.callback(e.coronaData)}))}}]),e}(),b=function(e){Object(d.a)(a,e);var t=Object(l.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){var e=this;if(!this.props.show)return null;return i.a.createElement("div",{className:"backdrop",style:{position:"fixed",top:0,bottom:0,left:0,right:0,backgroundColor:"rgba(0,0,0,0.3)",padding:50},onClick:this.props.onClose},i.a.createElement("div",{className:"modal-container ",style:{backgroundColor:"#fff",borderRadius:5,maxWidth:500,minHeight:300,margin:"0 auto",padding:30}},this.props.show?i.a.createElement("div",null,this.props.day.date,i.a.createElement(u.a,{className:"DialogTable",striped:!0,bordered:!0,hover:!0},i.a.createElement("tbody",null,Object.keys(this.props.day.formattedNumbers).map((function(t,a){return i.a.createElement("tr",{key:a},i.a.createElement("th",null,v.a.startCase(t)),i.a.createElement("td",null,e.props.day.formattedNumbers[t].length>0?e.props.day.formattedNumbers[t]:e.props.day[t]?e.props.day[t].toLocaleString(navigator.language,{minimumFractionDigits:0}):""))}))))):""))}}]),a}(i.a.Component),k=a(294),A=a(72),B=a.n(A),N=(a(137),a(111)),w=a(107),O=function(e){Object(d.a)(a,e);var t=Object(l.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))).changeStartDate=function(t){e.setState({startDate:t})},e.changeEndDate=function(t){e.setState({endDate:t})},e.handleSelectChange=function(t){e.setState({selectedOption:t})},e}return Object(c.a)(a,[{key:"dataPoints",value:function(){var e=[];return p.forEach((function(t){e.push({value:t,label:v.a.startCase(t)})})),e}},{key:"componentDidMount",value:function(){this.setState({endDate:y()().toDate(),startDate:y()().subtract(1,"month").toDate(),selectedOption:[]})}},{key:"isChartValid",value:function(){return this.state.selectedOption&&this.state.selectedOption.length>0}},{key:"getDateRange",value:function(){for(var e=this.state.startDate,t=new Date(e),a=this.state.endDate,n=[];t<a;)t.setTime(t.getTime()+864e5),n.push(new Date(t));return n}},{key:"getLabels",value:function(){var e=this.getDateRange(),t=[];return e.forEach((function(e){t.push(y()(e).format("MMM Do"))})),t}},{key:"getDatasets",value:function(){var e=this.state.selectedOption,t=this.getDateRange(),a=this.props.days,n=[];if(e){var i=["#B0E0E6","#ADD8E6","#87CEFA","#87CEEB","#00BFFF","#B0C4DE","#1E90FF","#6495ED","#4682B4","#4169E1","#0000FF","#0000CD","#00008B","#000080","#191970","#7B68EE","#6A5ACD","#483D8B","#FFA07A","#FA8072","#E9967A","#F08080","#CD5C5C","#DC143C","#B22222","#FF0000","#8B0000","#7CFC00","#7FFF00","#32CD32","#00FF00","#228B22","#008000","#006400","#ADFF2F","#9ACD32","#00FF7F","#00FA9A","#90EE90","#98FB98","#8FBC8F","#3CB371","#2E8B57","#808000","#556B2F","#6B8E23","#FF7F50","#FF6347","#FF4500","#FFD700","#FFA500","#FF8C00","#FFFFE0","#FFFACD","#FAFAD2","#FFEFD5","#FFE4B5","#FFDAB9","#EEE8AA","#F0E68C","#BDB76B","#FFFF00","#E0FFFF","#00FFFF","#00FFFF","#7FFFD4","#66CDAA","#AFEEEE","#40E0D0","#48D1CC","#00CED1","#20B2AA","#5F9EA0","#008B8B","#008080","#FFC0CB","#FFB6C1","#FF69B4","#FF1493","#DB7093","#C71585","#DCDCDC","#D3D3D3","#C0C0C0","#A9A9A9","#808080","#696969","#778899","#708090","#2F4F4F","#000000","#FFF8DC","#FFEBCD","#FFE4C4","#FFDEAD","#F5DEB3","#DEB887","#D2B48C","#BC8F8F","#F4A460","#DAA520","#CD853F","#D2691E","#8B4513","#A0522D","#A52A2A","#800000","#E6E6FA","#D8BFD8","#DDA0DD","#EE82EE","#DA70D6","#FF00FF","#FF00FF","#BA55D3","#9370DB","#8A2BE2","#9400D3","#9932CC","#8B008B","#800080","#4B0082"];return e.forEach((function(e){var r=v.a.sample(i),o={type:"line",label:e.label,fill:!1,borderColor:r,backgroundColor:r,pointBorderColor:r,pointBackgroundColor:r,pointHoverBackgroundColor:r,pointHoverBorderColor:r,data:[]},s=[];t.forEach((function(t){var n=y()(t).format("LL");a.forEach((function(t){t.date===n&&s.push(t[e.value])}))})),o.data=s,n.push(o)})),n}this.valid=!1}},{key:"render",value:function(){if(!this.props.show)return null;var e=this.state.selectedOption,t=this.dataPoints(),a={clear:"both",width:"100%",height:"40px",padding:"8px",textAlign:"left"},n={labels:this.getLabels(),datasets:this.getDatasets()};return i.a.createElement("div",{className:"backdrop",style:{position:"fixed",top:0,bottom:0,left:0,right:0,backgroundColor:"rgba(0,0,0,0.3)",padding:50}},i.a.createElement("div",{className:"modal-container ",style:{backgroundColor:"#fff",borderRadius:5,minHeight:"98%",margin:"0 auto",padding:30}},this.props.show?i.a.createElement("div",null,i.a.createElement("div",{className:"chartContainer"},this.isChartValid()?i.a.createElement(w.a,{data:n}):""),i.a.createElement("div",{className:"chartSelectionsContainer"},i.a.createElement("div",{style:a},"Range: ",i.a.createElement(B.a,{selected:this.state.startDate,onChange:this.changeStartDate})," to ",i.a.createElement(B.a,{selected:this.state.endDate,onChange:this.changeEndDate})),i.a.createElement("div",{style:a},i.a.createElement("div",{style:{display:"inline",float:"left",clear:"none",width:400}},i.a.createElement(N.a,{value:e,onChange:this.handleSelectChange,options:t,isMulti:!0,placeholder:"Choose chart values"}))))):"",i.a.createElement("div",{className:"footer",style:{width:"100%",textAlign:"right"}},i.a.createElement("button",{onClick:this.props.onClose},"Close"))))}}]),a}(i.a.Component),S=function(e){Object(d.a)(a,e);var t=Object(l.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).toggleModal=function(e){n.setState({activeDay:n.state.days[e.currentTarget.dataset.id],isOpen:!n.state.isOpen})},n.toggleModalChart=function(e){n.setState({modalChartIsOpen:!n.state.modalChartIsOpen})},n.state={days:[],isFetching:!1},n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.setState({days:[],meta:{},hasDays:!1,isFetching:!0,isOpen:!1,isShowingModal:!1,activeDay:!1,modalChartIsOpen:!1}),new C({callback:this.setData.bind(this)})}},{key:"componentDidUpdate",value:function(e){this.props.days!==e.days&&this.setState()}},{key:"setData",value:function(e){e=this.formatData(e.data),this.setState({days:e,isFetching:!1,hasDays:!0,isOpen:!1,activeDay:!1})}},{key:"formatData",value:function(e){var t=null;return e.reverse().forEach((function(a,n){var i=new D({index:n,day:a,prevDay:t});e[n]=i.row,t=i})),e}},{key:"render",value:function(){var e=this,t=this.state.days;return i.a.createElement("div",{className:"Spreadsheet-container"},i.a.createElement("p",null,i.a.createElement(k.a,{variant:"primary",onClick:this.toggleModalChart},"Chart")),i.a.createElement("script",null,"var data = ",JSON.stringify(t)),i.a.createElement(u.a,{striped:!0,bordered:!0,hover:!0,className:"Spreadsheet"},i.a.createElement("thead",{className:"Spreadsheet-header"},i.a.createElement("tr",null,i.a.createElement("th",{className:"Date"},"Date"),i.a.createElement("th",{className:"Confirmed"},"Confirmed"),i.a.createElement("th",{className:"NewInfected"},"New Infected"),i.a.createElement("th",{className:"Recovered"},"Recovered"),i.a.createElement("th",{className:"TotalDead"},"Dead"),i.a.createElement("th",{className:"TotalRecovered"},"Total Recovered"),i.a.createElement("th",{className:"Dead"},"Total Dead"),i.a.createElement("th",{className:"ActiveInfected"},"Active Infected"),i.a.createElement("th",{className:"InfectionRate",title:"Non-scientific!"},"*Infection rate"))),i.a.createElement("tbody",{className:"Spreadsheet-body"},t.map((function(t,a){return i.a.createElement("tr",{key:a,keyname:t.idx,onClick:e.toggleModal,"data-id":t.index},i.a.createElement("td",{className:"Date"},t.date),i.a.createElement("td",{className:"Confirmed"},t.positive.toLocaleString(navigator.language,{minimumFractionDigits:0})),i.a.createElement("td",{className:"NewInfected"},t.newPositive.toLocaleString(navigator.language,{minimumFractionDigits:0})),i.a.createElement("td",{className:"Recovered"},t.recovered>0?t.recovered.toLocaleString(navigator.language,{minimumFractionDigits:0}):""),i.a.createElement("td",{className:"TotalDead"},t.deathIncrease>0?t.deathIncrease.toLocaleString(navigator.language,{minimumFractionDigits:0}):""),i.a.createElement("td",{className:"TotalRecovered"},t.totalRecovered>0?t.totalRecovered.toLocaleString(navigator.language,{minimumFractionDigits:0}):""),i.a.createElement("td",{className:"Dead"},t.death>0?t.death.toLocaleString(navigator.language,{minimumFractionDigits:0}):""),i.a.createElement("td",{className:"ActiveInfected"},t.activeInfected.toLocaleString(navigator.language,{minimumFractionDigits:0})),i.a.createElement("td",{className:"InfectionRate"},t.infectionRate))})))),i.a.createElement(b,{show:this.state.isOpen,onClose:this.toggleModal,day:this.state.activeDay}),i.a.createElement(O,{show:this.state.modalChartIsOpen,onClose:this.toggleModalChart,days:t}))}}]),a}(n.Component),I=(a(287),function(e){Object(d.a)(a,e);var t=Object(l.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"componentDidMount",value:function(){document.title="Coronavirus Tracker (US)"}},{key:"render",value:function(){return i.a.createElement("div",{className:"App container"},i.a.createElement("h1",null,"Coronavirus Tracker (US)"),i.a.createElement(S,null))}}]),a}(n.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(I,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[113,1,2]]]);
//# sourceMappingURL=main.1d8ec8cc.chunk.js.map